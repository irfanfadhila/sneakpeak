{% extends "base.html" %}
{% load static %}
{% block content %}

    <div class="row">

        <div class="large-12 columns">

            <nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs" style="margin-bottom: 2%;">
                <li {% if cursor == 'home' %} class="active" {% endif %} role="menuitem"><a href="{% url 'adminsdm:index' %}">Home</a></li>
                <li {% if cursor == 'laporan' %} class="current" {% endif %}role="menuitem"><a href="#">Laporan</a></li>
            </nav>

            <ul class="tabs" data-tab role="tablist">
              <li class="tab-title active" role="presentation"><a href="#panel2-1" role="tab" tabindex="0" aria-selected="true" aria-controls="panel2-1" style="border-right: 1px solid black; font-size: small;">Angka Kredit</a></li>
              <li class="tab-title" role="presentation"><a href="#panel2-2" role="tab" tabindex="0" aria-selected="false" aria-controls="panel2-2" style="border-right: 1px solid black; font-size: small;">Pengajaran</a></li>
              <li class="tab-title" role="presentation"><a href="#panel2-3" role="tab" tabindex="0" aria-selected="false" aria-controls="panel2-3" style="border-right: 1px solid black; font-size: small;">Riset</a></li>
              <li class="tab-title" role="presentation"><a href="#panel2-4" role="tab" tabindex="0" aria-selected="false" aria-controls="panel2-4" style="font-size: small;">Bimbingan & Pengujian TA</a></li>
            </ul>
            <div class="tabs-content">
              <section role="tabpanel" aria-hidden="false" class="content active" id="panel2-1">
                <h2>First panel content goes here...</h2>
              </section>
              <section role="tabpanel" aria-hidden="true" class="content" id="panel2-2">
                {% if data_siak %}
                <table id="table-id-ajar" class="display table-data" style="table-layout: fixed">
                    <caption>Laporan Pengajaran</caption>
                    <thead>
                    <tr>
                        <th style="width: 30%">Nama Dosen</th>
                        <th style="width: 10%">Tahun Ajaran</th>
                        <th style="width: 10%">Semester</th>
                        <th style="width: 10%">Kode MK</th>
                        <th style="width: 20%">Nama MK</th>
                        <th style="width: 10%">Jumlah SKS</th>
                        <th style="width: 10%">Keterangan</th>
                    </tr>
                    </thead>
                    <tfoot style="display: table-header-group;">
                    <tr>
                        <th style="width: 30%">Nama Dosen</th>
                        <th style="width: 10%">Tahun Ajaran</th>
                        <th style="width: 10%">Semester</th>
                        <th style="width: 10%">Kode MK</th>
                        <th style="width: 20%">Nama MK</th>
                        <th style="width: 10%">Jumlah SKS</th>
                        <th style="width: 10%">Keterangan</th>
                    </tr>
                    </tfoot>
                    <tbody>
                    {% for d in data_siak %}
                        <tr id="{{ forloop.counter }}">
                            <td style="width: 30%">{{ d.nama }}</td>
                            <td style="width: 10%">2014</td>
                            <td style="width: 10%">1</td>
                            <td style="width: 10%">{{ d.kode_mata_kuliah }}</td>
                            <td style="width: 20%">{{ d.nama_mata_kuliah }}</td>
                            <td style="width: 10%">{{ d.sks }}</td>
                            <td style="width: 10%">{{ d.kelas }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% endif %}
              </section>
              <section role="tabpanel" aria-hidden="true" class="content" id="panel2-3">
                <h2>Third panel content goes here...</h2>
              </section>
              <section role="tabpanel" aria-hidden="true" class="content" id="panel2-4">
                {% if data_sidang %}
                <table id="table-id-ta" class="display table-data" style="table-layout: fixed">
                    <caption>Laporan Bimbingan dan Pengujian TA</caption>
                    <thead>
                    <tr>
                        <th style="width: 30%">Nama Dosen</th>
                        <th style="width: 10%">Peran</th>
                        <th style="width: 10%">Jenis TA</th>
                        <th style="width: 10%">Tahun Ajaran</th>
                        <th style="width: 10%">Semester</th>
                        <th style="width: 10%">Jumlah</th>
                        <th style="width: 10%">Keterangan</th>
                    </tr>
                    </thead>
                    <tfoot style="display:table-header-group;">
                    <tr>
                        <th style="width: 30%">Nama Dosen</th>
                        <th style="width: 10%">Peran</th>
                        <th style="width: 10%">Jenis TA</th>
                        <th style="width: 10%">Tahun Ajaran</th>
                        <th style="width: 10%">Semester</th>
                        <th style="width: 10%">Jumlah</th>
                        <th style="width: 10%">Keterangan</th>
                    </tr>
                    </tfoot>
                    <tbody>
                    {% for d in data_sidang.results %}
                        <tr id="{{ forloop.counter }}">
                            <td>{{ d.dosen }}</td>
                            <td>{{ d.peran }}</td>
                            <td>{{ d.jenis }}</td>
                            <td>{{ d.periode }}</td>
                            <td>{{ d.smt }}</td>
                            <td>{{ d.keterangan | length }}</td>
                            <td>{% for k in d.keterangan %}
                                    {{ k }},
                                {% endfor %}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% endif %}
              </section>
            </div>

        </div>

    </div>

    {% include "scriptRef.html" %}

    <script>
        $(document).foundation();
        $(document).ready( function() {
                $('.table-data tfoot th').each( function () {
                    var title = $('.table-data thead th').eq( $(this).index() ).text();
                    $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
                } );

                // DataTable
                var tableAjar = $('#table-id-ajar').DataTable({"bAutoWidth": false});
                var tableTA = $('#table-id-ta').DataTable({"bAutoWidth": false});

                // Apply the search
                tableAjar.columns().every( function () {
                    var that = this;

                    $( 'input', this.footer() ).on( 'keyup change', function () {
                        if ( that.search() !== this.value ) {
                            that
                                .search( this.value )
                                .draw();
                        }
                    } );
                } );
                tableTA.columns().every( function () {
                    var that = this;

                    $( 'input', this.footer() ).on( 'keyup change', function () {
                        if ( that.search() !== this.value ) {
                            that
                                .search( this.value )
                                .draw();
                        }
                    } );
                } );
            });
    </script>

{% endblock %}